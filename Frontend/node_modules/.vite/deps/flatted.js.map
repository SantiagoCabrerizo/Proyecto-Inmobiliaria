{
  "version": 3,
  "sources": ["../../flatted/esm/index.js"],
  "sourcesContent": ["/*! (c) 2020 Andrea Giammarchi */\r\n\r\nconst {parse: $parse, stringify: $stringify} = JSON;\r\nconst {keys} = Object;\r\n\r\nconst Primitive = String;   // it could be Number\r\nconst primitive = 'string'; // it could be 'number'\r\n\r\nconst ignore = {};\r\nconst object = 'object';\r\n\r\nconst noop = (_, value) => value;\r\n\r\nconst primitives = value => (\r\n  value instanceof Primitive ? Primitive(value) : value\r\n);\r\n\r\nconst Primitives = (_, value) => (\r\n  typeof value === primitive ? new Primitive(value) : value\r\n);\r\n\r\nconst revive = (input, parsed, output, $) => {\r\n  const lazy = [];\r\n  for (let ke = keys(output), {length} = ke, y = 0; y < length; y++) {\r\n    const k = ke[y];\r\n    const value = output[k];\r\n    if (value instanceof Primitive) {\r\n      const tmp = input[value];\r\n      if (typeof tmp === object && !parsed.has(tmp)) {\r\n        parsed.add(tmp);\r\n        output[k] = ignore;\r\n        lazy.push({k, a: [input, parsed, tmp, $]});\r\n      }\r\n      else\r\n        output[k] = $.call(output, k, tmp);\r\n    }\r\n    else if (output[k] !== ignore)\r\n      output[k] = $.call(output, k, value);\r\n  }\r\n  for (let {length} = lazy, i = 0; i < length; i++) {\r\n    const {k, a} = lazy[i];\r\n    output[k] = $.call(output, k, revive.apply(null, a));\r\n  }\r\n  return output;\r\n};\r\n\r\nconst set = (known, input, value) => {\r\n  const index = Primitive(input.push(value) - 1);\r\n  known.set(value, index);\r\n  return index;\r\n};\r\n\r\nexport const parse = (text, reviver) => {\r\n  const input = $parse(text, Primitives).map(primitives);\r\n  const value = input[0];\r\n  const $ = reviver || noop;\r\n  const tmp = typeof value === object && value ?\r\n              revive(input, new Set, value, $) :\r\n              value;\r\n  return $.call({'': tmp}, '', tmp);\r\n};\r\n\r\nexport const stringify = (value, replacer, space) => {\r\n  const $ = replacer && typeof replacer === object ?\r\n            (k, v) => (k === '' || -1 < replacer.indexOf(k) ? v : void 0) :\r\n            (replacer || noop);\r\n  const known = new Map;\r\n  const input = [];\r\n  const output = [];\r\n  let i = +set(known, input, $.call({'': value}, '', value));\r\n  let firstRun = !i;\r\n  while (i < input.length) {\r\n    firstRun = true;\r\n    output[i] = $stringify(input[i++], replace, space);\r\n  }\r\n  return '[' + output.join(',') + ']';\r\n  function replace(key, value) {\r\n    if (firstRun) {\r\n      firstRun = !firstRun;\r\n      return value;\r\n    }\r\n    const after = $.call(this, key, value);\r\n    switch (typeof after) {\r\n      case object:\r\n        if (after === null) return after;\r\n      case primitive:\r\n        return known.get(after) || set(known, input, after);\r\n    }\r\n    return after;\r\n  }\r\n};\r\n\r\nexport const toJSON = any => $parse(stringify(any));\r\nexport const fromJSON = any => parse($stringify(any));\r\n"],
  "mappings": "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",
  "names": ["value"]
}
